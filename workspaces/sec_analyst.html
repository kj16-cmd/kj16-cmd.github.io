 <!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="/styles/beef.css">
<title>soc_workspace</title>
</head>

<body>
  <!-- Applying .header class to a header element -->
  <div class="header">
    <h1>Security Alerts Below</h1>
  </div>
  <!-- Container div with the 'center-both' class -->
  <div class="center-both">
    <!-- Content to center inside the 'center-text' div -->
    <div class="center-text">
<button onclick="sortBytime()">Sort by date and time</button>
<button onclick="sortByinfo()">Sort by info</button>
  
<div id="data_fields">
<script>
    let usersData = []; // This will store the fetched JSON data

    // Fetch the data from the JSON file
    fetch('/db/investigation.json?')
        .then(response => response.json())
        .then(data => {
            usersData = data; // Store the data
            displayUsers(usersData); // Initial display
        })
        .catch(error => console.error('Error loading the JSON file:', error));



    // Function to display users
    function displayUsers(users) {
        const jsonDataDiv = document.getElementById("data_fields");
        jsonDataDiv.innerHTML = ''; // Clear existing content

        // Loop through each user and display the data
        users.forEach(user => {
            jsonDataDiv.innerHTML += `
                <div class="user-info">
                    <span>Investigation name>> ${user.investigation_name} | </span>
                    <span>Date Started >> ${user.date_started} | </span>
                    <span>Status >> ${user.status} | </span>
                    <span>Lead Investigator >> ${user.lead_investigator} | </span>
                    <span>Attack Type >> ${user.attack_type} | </span>
		    <span>Priority >> ${user.priority} | </span>
     		    <span>Description >> ${user.description} | </span>
      
                </div>
            `;
        });
    }



	
    // Function to sort users by Name
    function sortBytime() {
        const sortedUsers = [...usersData].sort((a, b) => {
            if (a.DateandTime < b.DateandTime) return -1;
            if (a.DateandTime > b.DateandTime) return 1;
            return 0;
        });
        displayUsers(sortedUsers); // Update the display with sorted data
    }

    // Function to sort users by Role
    function sortByinfo() {
        const sortedUsers = [...usersData].sort((a, b) => {
            if (a.info < b.info) return -1;
            if (a.info > b.info) return 1;
            return 0;
        });
        displayUsers(sortedUsers); // Update the display with sorted data
    }
</script>
</div>
</body>
</html>

